# RFC 2544 네트워크 벤치마킹 표준 정보

## IETF RFC 2544 표준 개요

**RFC 2544: Benchmarking Methodology for Network Interconnect Devices**
- **발행**: 1999년 3월
- **저자**: S. Bradner (Harvard University), J. McQuaid (NetScout Systems)
- **상태**: Informational
- **URL**: https://tools.ietf.org/html/rfc2544

### 표준의 목적

RFC 2544는 네트워크 상호연결 장치의 성능을 측정하기 위한 표준화된 방법론을 제공합니다. 이 표준은 다양한 제조사의 장비를 공정하게 비교할 수 있도록 일관된 시험 방법을 정의합니다.

### 주요 시험 항목

#### 1. Throughput (처리량) - Section 26.1

**정의 (RFC 1242):**
> "The maximum rate at which none of the offered frames are dropped by the device."
>
> 제공된 프레임 중 어느 것도 장치에 의해 드롭되지 않는 최대 전송률

**시험 방법:**
- 바이너리 서치 알고리즘 사용
- 시험 시간: 최소 60초 (권장: 60-300초)
- 허용 손실: 0% (실무적으로 0.001% 이하)
- 프레임 크기: 64, 128, 256, 512, 1024, 1280, 1518 바이트

**중요성:**
- 네트워크 용량 계획의 기준
- SLA(Service Level Agreement) 수립 근거
- 장비 성능 비교의 핵심 지표

#### 2. Latency (지연시간) - Section 26.2

**정의 (RFC 1242):**
> "For store and forward devices: The time interval starting when the last bit of the input frame reaches the input port and ending when the first bit of the output frame is seen on the output port."
>
> 저장-전달 장치의 경우: 입력 프레임의 마지막 비트가 입력 포트에 도달한 시점부터 출력 프레임의 첫 비트가 출력 포트에서 보이는 시점까지의 시간 간격

**시험 방법:**
- Throughput의 최소 10% 부하에서 측정 시작
- 부하를 점진적으로 증가시키며 측정
- 양방향(Round-Trip Time) 측정 가능
- 최소 120초 시험 시간 권장

**중요성:**
- 실시간 애플리케이션 적합성 판단
- VoIP, 비디오 스트리밍 품질 예측
- Time-Sensitive Networking (TSN) 요구사항 검증

#### 3. Frame Loss Rate (프레임 손실률) - Section 26.3

**정의:**
> "Percentage of frames that should have been forwarded by a network device under steady state (constant) load that were not forwarded due to lack of resources."
>
> 리소스 부족으로 인해 전달되지 못한, 정상 상태(일정 부하) 하에서 네트워크 장치가 전달했어야 할 프레임의 백분율

**시험 방법:**
- Throughput 대비 백분율로 부하 설정 (10%, 20%, ..., 100%)
- 각 부하에서 최소 60초 시험
- 손실된 프레임 수 / 전송된 프레임 수 × 100

**중요성:**
- 과부하 상황에서의 장비 동작 특성 파악
- 버퍼 크기 및 큐 관리 성능 평가
- 네트워크 오버프로비저닝 계획

#### 4. Back-to-back Frames (연속 프레임) - Section 26.4

**정의:**
> "The number of frames in the longest burst that the DUT will handle without any frame loss."
>
> DUT(Device Under Test)가 프레임 손실 없이 처리할 수 있는 가장 긴 버스트의 프레임 수

**시험 방법:**
- 최소 프레임 간격(IFG: Inter-Frame Gap)으로 프레임 전송
- 버스트 크기를 증가시키며 손실 발생 지점 탐색
- 최소 50회 반복 시험

**중요성:**
- 버퍼 용량 평가
- 버스트 트래픽 처리 능력 검증
- 실제 네트워크 환경의 트래픽 패턴 대응력

## 관련 RFC 표준

### RFC 1242 - Benchmarking Terminology

**URL**: https://tools.ietf.org/html/rfc1242

RFC 2544의 기반이 되는 용어 정의 표준:
- **Throughput**: 처리량
- **Latency**: 지연시간
- **Frame Loss**: 프레임 손실
- **Constant Load**: 일정 부하
- **Overload Behavior**: 과부하 동작

### RFC 2889 - Benchmarking Methodology for LAN Switching Devices

**URL**: https://tools.ietf.org/html/rfc2889

LAN 스위치 특화 벤치마킹 방법론:
- Forwarding Rate (전달률)
- Address Handling (주소 처리)
- Congestion Control (혼잡 제어)
- Broadcast/Multicast Performance

### RFC 6201 - Device Reset Characterization

**URL**: https://tools.ietf.org/html/rfc6201

장치 리셋 및 복구 시험 방법론

## Ethernet 프레임 구조 (IEEE 802.3)

```
┌──────────────────────────────────────────────────────────────┐
│                    Ethernet Frame                             │
├─────────────┬─────────────────────────────────┬──────┬───────┤
│  Preamble   │         MAC Frame               │ FCS  │  IFG  │
│  (8 bytes)  │     (64-1518 bytes)             │ (4B) │ (12B) │
└─────────────┴─────────────────────────────────┴──────┴───────┘
              ├───────┬──────────────┬──────┤
              │Header │   Payload    │      │
              │(14 B) │  (46-1500 B) │      │
              └───────┴──────────────┴──────┘
```

### 프레임 크기 계산

**최소 프레임 (64 bytes):**
- Header: 14 bytes (Destination MAC + Source MAC + EtherType)
- Payload: 46 bytes (최소)
- FCS: 4 bytes (Frame Check Sequence)
- **= 64 bytes**

**최대 프레임 (1518 bytes):**
- Header: 14 bytes
- Payload: 1500 bytes (MTU - Maximum Transmission Unit)
- FCS: 4 bytes
- **= 1518 bytes**

**와이어 상 오버헤드:**
- Preamble: 8 bytes
- Inter-Frame Gap (IFG): 12 bytes
- **총 오버헤드: 38 bytes per frame**

### 라인 레이트 계산

**1 Gigabit Ethernet의 이론적 최대 처리량:**

프레임 크기별 최대 PPS (Packets Per Second):
```
64-byte frames:   1,488,095 pps = 761.9 Mbps (payload)
128-byte frames:    844,595 pps = 865.1 Mbps
256-byte frames:    452,899 pps = 927.2 Mbps
512-byte frames:    234,962 pps = 963.2 Mbps
1024-byte frames:   119,583 pps = 981.5 Mbps
1518-byte frames:    81,274 pps = 987.7 Mbps
```

**계산 공식:**
```
Line Rate (bps) = (Frame Size × 8) / ((Frame Size + 38) / 1,000,000,000)
                = (Frame Size × 8 × 1,000,000,000) / (Frame Size + 38)
```

## 바이너리 서치 알고리즘 (Binary Search)

RFC 2544 권장 Throughput 탐색 방법:

```python
def find_throughput(min_rate, max_rate, duration=60):
    """
    바이너리 서치로 무손실 최대 처리량 탐색

    Args:
        min_rate: 최소 전송률 (Mbps)
        max_rate: 최대 전송률 (Mbps)
        duration: 시험 시간 (초)

    Returns:
        무손실 최대 처리량 (Mbps)
    """
    threshold = 0.001  # 0.001% 손실률 허용

    while (max_rate - min_rate) > precision:
        test_rate = (min_rate + max_rate) / 2
        loss_rate = run_test(test_rate, duration)

        if loss_rate <= threshold:
            min_rate = test_rate  # 더 높은 속도 시험
        else:
            max_rate = test_rate  # 더 낮은 속도 시험

    return min_rate
```

**장점:**
- 효율적: O(log n) 복잡도
- 정확성: 정밀한 Throughput 측정
- 시간 절약: 선형 탐색 대비 시간 단축

**권장 정밀도:**
- 반복 횟수: 10-15회
- 수렴 조건: (max - min) < 1 Mbps

## 시험 환경 요구사항

### 하드웨어

1. **트래픽 생성기 (Traffic Generator)**
   - 정밀한 패킷 생성 능력
   - 나노초 단위 타임스탬핑
   - 라인 레이트 전송 지원

2. **측정 장비**
   - GPS/PTP 동기화 클럭
   - 하드웨어 기반 통계 수집
   - 낮은 측정 오버헤드

### 소프트웨어 도구

**오픈소스:**
- **iperf3**: TCP/UDP 처리량 측정
- **sockperf**: 저지연 측정 특화
- **TRex**: Cisco의 고성능 트래픽 생성기
- **MoonGen**: DPDK 기반 패킷 생성

**상용:**
- **Spirent TestCenter**: 업계 표준 시험 장비
- **Ixia IxNetwork**: 대규모 네트워크 시험
- **EXFO**: 이더넷 성능 측정

### 환경 조건

1. **네트워크 격리**
   - 전용 시험 환경 (배경 트래픽 없음)
   - 직접 연결 또는 전용 스위치

2. **시스템 최적화**
   - CPU 주파수 고정 (no power saving)
   - 인터럽트 분산 (IRQ affinity)
   - 커널 바이패스 (DPDK, XDP)

3. **온도 안정화**
   - 시험 전 30분 워밍업
   - 일정한 실내 온도 유지

## 결과 해석 및 보고

### 표준 보고 형식

RFC 2544 시험 결과 보고 시 포함 사항:

1. **시험 구성**
   - DUT 정보 (제조사, 모델, 펌웨어)
   - 시험 토폴로지
   - 시험 도구 및 버전

2. **시험 조건**
   - 프레임 크기
   - 시험 시간
   - 반복 횟수
   - 환경 온도

3. **측정 결과**
   - 수치 데이터 (표 형식)
   - 그래프 (라인 차트, 바 차트)
   - 통계 (평균, 최소, 최대, 표준편차)

4. **분석 및 결론**
   - 성능 평가
   - 병목 지점 식별
   - 개선 권고사항

### 성능 등급 기준 (예시)

**Throughput:**
- 탁월: > 95% of line rate
- 우수: > 90% of line rate
- 양호: > 80% of line rate
- 보통: > 70% of line rate

**Latency (Gigabit Ethernet):**
- 탁월: < 10 μs
- 우수: < 50 μs
- 양호: < 100 μs
- 보통: < 500 μs

**Frame Loss:**
- 탁월: 0%
- 우수: < 0.001%
- 양호: < 0.01%
- 보통: < 0.1%

## TSN (Time-Sensitive Networking) 연계

RFC 2544 벤치마킹은 TSN 성능 검증의 기초:

### IEEE 802.1 TSN 표준

1. **IEEE 802.1Qbv (TAS - Time-Aware Shaper)**
   - 시간 기반 스케줄링
   - 지연시간 보장

2. **IEEE 802.1Qav (CBS - Credit-Based Shaper)**
   - 대역폭 예약
   - 우선순위 기반 전송

3. **IEEE 1588 (PTP - Precision Time Protocol)**
   - 나노초 단위 시간 동기화
   - 분산 시스템 시각 정렬

### TSN 성능 요구사항

**산업 자동화:**
- 지연시간: < 100 μs
- 지터: < 1 μs
- 패킷 손실: 0%

**차량 네트워크 (Automotive):**
- 지연시간: < 250 μs (Class A)
- 지연시간: < 2 ms (Class B)
- 패킷 손실: < 0.0001%

**오디오/비디오 스트리밍:**
- 지연시간: < 2 ms
- 대역폭 보장: 정확한 bit rate
- 지터: < 125 μs

## 참고 자료

### IETF Documents
- RFC 2544: https://tools.ietf.org/html/rfc2544
- RFC 1242: https://tools.ietf.org/html/rfc1242
- RFC 2889: https://tools.ietf.org/html/rfc2889
- RFC 6201: https://tools.ietf.org/html/rfc6201
- RFC 5180: https://tools.ietf.org/html/rfc5180

### IEEE Standards
- IEEE 802.3: Ethernet
- IEEE 802.1Q: VLANs and QoS
- IEEE 802.1Qbv: Time-Aware Shaper
- IEEE 802.1Qav: Credit-Based Shaper
- IEEE 1588: Precision Time Protocol

### 추가 자료
- IETF Benchmarking Methodology Working Group: https://datatracker.ietf.org/wg/bmwg/
- Ethernet Alliance: https://ethernetalliance.org/
- Time-Sensitive Networking Task Group: https://1.ieee802.org/tsn/

---

**문서 작성일**: 2025년 10월 20일

**표준 기준**: IETF RFC 2544 (1999년 3월 발행)

**적용 대상**: 1 Gigabit Ethernet 네트워크 성능 벤치마킹
